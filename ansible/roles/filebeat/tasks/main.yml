- name: Setting up server with Filebeat on {{ inventory_hostname }}
  block:
    - import_tasks: 01-prepare_required_packages.yml
      tags: [prepare_packages]

    - import_tasks: 02-setup_filebeat.yml
      tags: [setup_filebeat]

    - import_tasks: 03-configure_startup_programs.yml
      tags: [configure_startup_programs]

  rescue:
    - debug:
        msg: "ERROR in Setting up server with Filebeat on {{ inventory_hostname }}"
  always:
    - debug:
        msg: "Setting up server with Filebeat FINISHED on {{ inventory_hostname }}"